ALIAS F_CONSTS          0xFF00
ALIAS STR_ENABLED       0x100
ALIAS STR_AVAILABLE     0x110
ALIAS STR_READBLOCK     0x120
ALIAS STR_READAVAILABLE 0x130
ALIAS STR_YES           0x140
ALIAS STR_NO            0x150

ORIGIN 0
        LOAD D M F_CONSTS       # Read the flag into reg D

        LOAD A I STR_ENABLED
        CALL :WSTR
        JBS D 2 :ENYES          # Check for enabled
        LOAD A I STR_NO         # Set str to NO if enabled bit not set
        JMP :ENWR
:ENYES  LOAD A I STR_YES
:ENWR   CALL :WSTR
		CALL :WNL

		LOAD A I STR_READAVAILABLE
		CALL :WSTR
		JBS D 4 :RAYES
		LOAD A I STR_NO
		JMP :RAWR
:RAYES  LOAD A I STR_YES
:RAWR   CALL :WSTR
		CALL :WNL

        HALT

:WSTR   LOAD C RA
:WSTR_L LOAD A AC
        JZ A :WSTR_R
        SAVE A P0
        INC C
        JMP :WSTR_L
:WSTR_R RET

:WNL    LOAD A I13
        SAVE A P0
        LOAD A I10
        SAVE A P0
        RET

MEMORY
0x100 "Enabled "
0x110 "Available "
0x120 "ReadBlock "
0x130 "ReadAvailable "
0x140 "Yes"
0x150 "No"